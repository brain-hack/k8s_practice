# Namespace

<aside>
ğŸ’¡ ë¦¬ëˆ…ìŠ¤ì˜ namespaceì™€ëŠ” ë‹¤ë¥¸ê²ë‹ˆë‹¤.

</aside>

dockerë‚˜ docker swarmì€ ì»¨í…Œì´ë„ˆë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” ë°©ë²•ì´ ì—†ìŒ

docker runì´ë‚˜ docker-composeë¡œ ìˆ˜ë°±ê°œì˜ ì»¨íƒœì´ë„ˆë¥¼ ìƒì„±í•´ë„ ëª¨ë“  ì»¨í…Œì´ë„ˆ ëª©ë¡ì´ ë‹¤ë³´ì„

í•˜ì§€ë§Œ ëª©ì ê³¼ ìš©ë„ì— ë§ê²Œ ëŸ¬ì†ŒìŠ¤ë“¤ì„ êµ¬ë¶„ì§€ì–´ì„œ ê´€ë¦¬í•  í•„ìš”ê°€ ìˆìŒ

kubernetesì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ë¶„í•˜ê¸° ìœ„í•´ namespaceë¼ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ì œê³µ

namespaceëŠ” pod, replicaset, deploy, service ë“±ê³¼ ê°™ì€ kubernetes ë¦¬ì†ŒìŠ¤ê°€ ë¬¶ì—¬ìˆëŠ” ê·¸ë£¹(ê°€ìƒê³µê°„)

```bash
kubectl get namespaces # kubectl get ns
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled.png)

```bash
kubectl get pod -n default
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%201.png)

```bash
kubectl get pod -n kube-system
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%202.png)

```bash
kubectl get service -n kube-system
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%203.png)

## ë…¼ë¦¬ì  ê·¸ë£¹

ë™ì¼í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ìƒì— ìˆë‹¤ê³  ë¬¼ë¦¬ì ìœ¼ë¡œ ê°™ì€ ë…¸ë“œì— ìˆëŠ” ê²ƒì´ ì•„ë‹˜

ë…¼ë¦¬ì ì¸ ê³µê°„ì˜ êµ¬ë¶„ì¼ë¿

## labelê³¼ì˜ ì°¨ì´

labelë„ ë¦¬ì†ŒìŠ¤ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆìŒ

```bash
kubectl get pod -l app=webservice
```

ã„´

ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” ë³´ë‹¤ ë” ë„“ì€ ìš©ë„ë¡œ í™œìš©ì´ ê°€ëŠ¥

ResourceQuotaë¥¼ ì´ìš©í•´ íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì œí•œ 

ì• ë“œë¯¸ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì´ìš©í•´ íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ podì—ëŠ” í•­ìƒ sidecarê°€ ë¶™ì„ ìˆ˜ ì‡ê²Œ í•¨

## namespace ë§Œë“¤ê¸°

```bash
 vi k8s_yaml/production-namespace.yaml
```

```yaml
apiVersion: v1
kind: Namespace
metadata:
  name: production
```

```bash
kubectl apply -f k8s_yaml/production-namespace.yaml
```

```bash
kubectl get ns 
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%204.png)

```bash
kubectl delete ns production
```

```bash
kubectl create ns lotte

```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%205.png)

### ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë¦¬ì†ŒìŠ¤ ë°°í¬

```bash
vi k8s_yaml/hostname-deploy-svc-ns.yaml
```

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hostname-deployment-ns
  namespace: lotte
spec:
  replicas: 1
  selector:
    matchLabels:
      app: webserver
  template:
    metadata:
      name: my-webserver
      labels:
        app: webserver
    spec:
      containers:
      - name: my-webserver
        image: alicek106/rr-test:echo-hostname
        ports:
        - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: hostname-svc-clusterip-ns
  namespace: lotte
spec:
  ports:
    - name: web-port
      port: 8080
      targetPort: 80
  selector:
    app: webserver
  type: ClusterIP
```

```bash
kubectl apply -f k8s_yaml/hostname-deploy-svc-ns.yaml
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%206.png)

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%207.png)

## ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„œë¹„ìŠ¤ ì ‘ê·¼

```bash
kubectl run -i --tty --rm debug --image=alicek106/ubuntu:curl --restart=Never -- bash
```

```bash
curl hostname-svc-clusterip-ns:8080
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%208.png)

ì ‘ì†ì´ ì•ˆëŒ

í•˜ì§€ë§Œ [ì„œë¹„ìŠ¤ì´ë¦„].[ë„¤ì„ìŠ¤í˜ì´ìŠ¤].svcë¡œ ì ‘ì†í•˜ë©´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

<aside>
ğŸ’¡ ì„œë¹„ìŠ¤ì˜ DNS FQDN(Fully QQualified Domain Name)

[ì„œë¹„ìŠ¤ì´ë¦„].[ë„¤ì„ìŠ¤í˜ì´ìŠ¤].svc.cluster.local

</aside>

```bash
curl hostname-svc-clusterip-ns.lotte.svc:8080 --silent
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%209.png)

## ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì¢…ì†ì  ì˜¤ë¸Œì íŠ¸ / ë…ë¦½ì  ì˜¤ë¸Œì íŠ¸

### ì¢…ì†ì  ì˜¤ë¸Œì íŠ¸

ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì†í•´ì„œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‹¨ìœ„ë¡œ êµ¬ë¶„ì´ ê°€ëŠ¥

```bash
kubectl api-resources --namespaced=true
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%2010.png)

### ë…ë¦½ì  ì˜¤ë¸Œì íŠ¸

ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì†í•˜ì§€ ì•Šì€ ë¦¬ì†ŒìŠ¤ë“¤

```bash
kubectl api-resources --namespaced=false
```

![Untitled](Namespace%2049316f7889114a8d84c26d249c72db98/Untitled%2011.png)